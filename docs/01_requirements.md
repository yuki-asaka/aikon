# 要件定義

## ユースケース（MVP）

- 自分のSNSアイコンとして、リアルな顔写真ではなくイラスト風画像を使いたいユーザー
- SNSやメッセージアプリなどで使用するプロフ画像として需要がある
- 今後、用途別出力（名刺・動画用など）や複数スタイルへの対応も視野に入れる

## 必要機能

| 機能 | 説明 |
|------|------|
| 画像アップロード | ユーザーから顔写真をアップロード |
| 背景除去 | 背景を透過（必要に応じて） |
| イラスト化 | 元画像の特徴を活かしてイラスト化（モデル選定が重要） |
| 出力 | SNS用（PNG, 400x400）の画像を返す |
| 認証 | Firebase Authenticationによるユーザー認証・認可（MVPではGoogleアカウント等による簡易認証で可） |

> **補足:**  
> Stable Diffusion（通常版）は「img2img」用途では元画像の特徴が弱くなることが多いです。  
> より元画像に近いイラスト化を求める場合、「ControlNet」や「InstantID」など、顔特徴や輪郭を保持できるモデルの利用を検討してください。

---

## バックエンド実装内容（概要）

- FastAPI による REST API 実装
- 主なエンドポイント:
    - `POST /upload` : 画像ファイルの受信・保存
    - `POST /generate` : Replicate API 連携によるイラスト生成
    - `GET /result/{id}` : 生成済み画像の取得
    - `GET /health` : ヘルスチェック
- 画像は一時保存し、生成結果はIDで管理
- エラー時は適切なHTTPステータスとメッセージを返却
- **Firebase Authenticationで発行されたIDトークンを用いてAPIリクエスト時に認可チェックを実装**

詳細は [システム構成と処理の流れ](./03_system_design.md) も参照してください。

## 出力画像

- 形式: PNG
- サイズ: 400x400px
